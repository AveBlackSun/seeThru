/*! jquery-seethru 2.0.0 30-08-2014 see https://github.com/m90/jquery-seeThru for details */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.seeThru=b()}(this,function(){function a(a){var b,c=document.createElement("canvas"),d=c.getContext("2d");c.width=a.width,c.height=a.height,b=d.getImageData(0,0,a.width,a.height);for(var e=3,f=b.data.length;f>e;e+=4)b.data[e-1]=b.data[e-2]=b.data[e-3]=b.data[e],b.data[e]=255;return b}function b(a,b){for(var c=3,d=a.data.length;d>c;c+=4)a.data[c]=b[c-1],a.data[c-3]=a.data[c-3]/(b[c-1]?b[c-1]/255:1),a.data[c-2]=a.data[c-2]/(b[c-1]?b[c-1]/255:1),a.data[c-1]=a.data[c-1]/(b[c-1]?b[c-1]/255:1);return a}function c(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length;c++)if(window[b[c]+"RequestAnimationFrame"])return window[b[c]+"RequestAnimationFrame"];return function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}}function d(){for(var a=["ms","moz","webkit","o"],b=0;b<a.length;b++){if(window[a[b]+"CancelAnimationFrame"])return window[a[b]+"CancelAnimationFrame"];if(window[a[b]+"CancelRequestAnimationFrame"])return window[a[b]+"CancelRequestAnimationFrame"]}return function(a){clearTimeout(a)}}function e(a){return[].slice.call(a)}function f(a){return Object.prototype.toString.call(a)}function g(a,b){b.nextSibling?b.parentNode.insertBefore(a,b.nextSibling):b.parentNode.appendChild(a)}function h(a){return a.tagName?a:"[object String]"===f(a)?document.querySelector(a):a.length?a[0]:null}function i(a){a=a||window.jQuery,a.fn.seeThru=function(){var b=e(arguments);return this.each(function(){if(!b.length||1===b.length&&"[object Object]"===f(b[0])){if(a(this).data("seeThru"))return;a(this).data("seeThru",new k(this,b[0]).init())}else if(b.length&&"[object String]"===f(b[0])){if(!a(this).data("seeThru"))return;a(this).data("seeThru")[b[0]](b[1]),"revert"===b[0]&&a(this).data("seeThru",null)}})}}function j(e,f){var i,j,k,l=!1,m=this,n=f.staticMask?1:2,o={width:parseInt(f.width,10),height:parseInt(f.height,10)},p=document.createElement("canvas"),q=p.getContext("2d"),r=document.createElement("canvas"),s=r.getContext("2d"),t=window.requestAnimationFrame||c(),u=window.cancelAnimationFrame||d(),v=function(a){var c,d,g,h;if(l){for(q.drawImage(e,0,0,o.width,o.height*n),c=q.getImageData(0,0,o.width,o.height),d=q.getImageData(0,o.height,o.width,o.height).data,f.unmult&&b(c,d),g=3,h=c.data.length;h>g;g+=4)c.data[g]=f.alphaMask?d[g-1]:Math.max(d[g-1],d[g-2],d[g-3]);s.putImageData(c,0,0,0,0,o.width,o.height)}a&&(k=t(function(){v(!0)}))},w=function(b){if("IMG"!==b.tagName)throw new Error("Cannot use non-image element as mask!");b.width=o.width,b.height=o.height,f.alphaMask?q.putImageData(a(o,b),0,o.height):q.drawImage(b,0,o.height,o.width,o.height),b.style.display="none"};this.init=function(){var a=e.getBoundingClientRect();o.height&&o.width||(e.width&&!e.height?(o.width=o.width||e.videoWidth,o.height=o.height||e.videoHeight/n):e.height?(o.width=o.width||parseInt(a.width,10),o.height=o.height||parseInt(a.width,10)/(e.videoWidth/Math.floor(e.videoHeight/n))):e.width?(o.width=o.width||parseInt(a.height,10)*(e.videoWidth/Math.floor(e.videoHeight/n)),o.height=o.height||parseInt(a.height,10)):(o.width=o.width||parseInt(a.width,10),o.height=o.height||parseInt(a.height,10)/n)),p.width=o.width,p.height=2*o.height,p.style.display="none",p.className="seeThru-buffer",r.width=o.width,r.height=o.height,r.className="seeThru-display",g(p,e),g(r,e),f.staticMask&&w(h(f.staticMask)),f.poster&&e.poster&&(j=document.createElement("div"),j.className="seeThru-poster",j.style.width=o.width+"px",j.style.height=o.height+"px",j.style.position="absolute",j.style.top=0,j.style.left=0,j.style.backgroundSize="cover",j.style.backgroundPosition="center",j.style.backgroundImage='url("'+e.poster+'")',g(j,e)),i=window.getComputedStyle(e).display,e.style.display="none","autoplay"===f.start&&e.play(),l=!0},this.startRendering=function(){return v(!0),this},this.stopRendering=function(){return u(k),this},this.teardown=function(){return u(k),e.nextSibling.remove(),e.nextSibling.remove(),e.style.display=i,this},this.updateMask=function(a){return w(a)},this.getCanvas=function(){return r},this.getPoster=function(){return j},e.readyState>0?this.init():e.addEventListener("loadedmetadata",function(){m.init()})}function k(a,b){var c=this,d={start:"autoplay",end:"loop",mask:!1,alphaMask:!1,width:null,height:null,poster:!1,unmult:!1},e=function(){try{return new Event("submit",{bubbles:!1}).bubbles!==!1?!1:new Event("submit",{bubbles:!0}).bubbles!==!0?!1:!0}catch(a){return!1}}(),f=["mouseenter","mouseleave","click","mousedown","mouseup","mousemove","mouseover","hover","dblclick","contextmenu","focus","blur"];if(b=b||{},this._video=h(a),!this._video||"VIDEO"!==this._video.tagName)throw new Error("Could not use specified source");this._options=function(a){for(var b in d)b in a||(a[b]=d[b]);return a}(b),this.init=function(){function a(){c._video.play(),c._options.poster?c._seeThru.getPoster().removeEventListener("click",a):c._seeThru.getCanvas().removeEventListener("click",a)}return this._seeThru=new j(this._video,this._options),"clicktoplay"===this._options.start?this._options.poster?this._seeThru.getPoster().addEventListener("click",a):this._seeThru.getCanvas().addEventListener("click",a):"autoplay"===this._options.start&&b.poster&&(this._seeThru.getPoster().style.display="none"),"rewind"===this._options.end?this._video.addEventListener("ended",function(){c._video.currentTime=0,c._seeThru.getCanvas().addEventListener("click",a)}):"stop"!==this._options.end&&this._video.addEventListener("ended",function(){c._video.currentTime=0,c._video.play()}),this._options.poster&&this._video.poster&&(this._video.addEventListener("play",function(){c._seeThru.getPoster().style.display="none"}),this._video.addEventListener("pause",function(){c._seeThru.getPoster().style.display="block"})),f.forEach(function(a){c._seeThru.getCanvas().addEventListener(a,function(){var b;e?b=new Event(a):(b=document.createEvent("Event"),b.initEvent(a,!0,!0)),c._video.dispatchEvent(b)})}),this._seeThru.startRendering(),this},this.play=function(){return this._video.play(),this},this.pause=function(){return this._video.pause(),this},this.revert=function(){return this._seeThru.teardown(),this},this.updateMask=function(a){return this._seeThru.updateMask(h(a)),this}}return window.jQuery&&i(window.jQuery),{create:function(a,b){return new k(a,b).init()},attach:i}});